<table class="table table-hover">
  <thead>
    <tr>
      <th>Name</th>
      <th>Mobile</th>
      <th>Interested in</th>
      <th>Worked</th>
      <th>Contacted</th>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <% @members.each do |member| %>
      <tr id="<%=member.id %>">
        <td class="worker_column"><%= member.name %></td>
        <td class="worker_column"><%= member.mobile %></td>
        <td class="worker_column"><%= member.work %></td>
        <td class="worker_column"><%= member.jobs.length %></td>
        <td class="worker_column"><%= member.contacteds.length %></td>
        <td><%= link_to 'Show', member_path(member) %></td>
        <td><%= link_to 'Edit', edit_member_path(member) %></td>
        <td><%= link_to 'Delete', member_path(member),
                method: :delete,
                data: { confirm: 'Are you sure?' } %></td>
      </tr>
      <div id="info<%=member.id %>" style="display:none">
        <ul class="list-group">
          <li class="list-group-item"> <strong>Date added: </strong> <%= member.dateAdded %></li>
          <li class="list-group-item"> <strong>Email: </strong> <%= member.email %></li>
          <li class="list-group-item"> <strong>Person id: </strong> <%= member.personId %></li>
          <li class="list-group-item"> <strong>Term: </strong> <%= member.term %></li>
          <li class="list-group-item"> <strong>Work card: </strong> <%= member.workCard %></li>
          <li class="list-group-item"> <strong>Comment: </strong> <%= member.comment %></li>
        </ul>
      </div>
      <tr id="contacted<%=member.id %>" style="display:none">
        <td>
          <table class="table">
            <thead>
              <tr>
                <th>Date</th>
                <th>For</th>
                <th>Comment</th>
                <th colspan="1"></th>
              </tr>
            </thead>
            <% member.contacteds.each do |contacted| %>
              <tbody>
                <tr>
                  <td><%= contacted.date %></td>
                  <td><%= contacted.for %></td>
                  <% if contacted.comment %>
                    <td><%= contacted.comment %></td>
                  <% end %>
                  <td> <%= link_to 'Delete', [contacted.member, contacted],
                   method: :delete,
                   data: { confirm: 'Are you sure?' } %></td>
                </tr>
              </tbody>
            <% end %>
          </table>
        </td>
      </tr>
      <tr id="worked<%=member.id %>" style="display:none">
        <td colspan="12">
          <table class="table">
            <tr>
              <th>Date</th>
              <th>Activity</th>
              <th>Comment</th>
              <th colspan="1"></th>
            </tr>
            <% member.jobs.each do |job| %>
              <tr>
                <td><%= job.date %></td>
                <td><%= job.activity %></td>
                <% if job.comment %>
                  <td><%= job.comment %></td>
                <% end %>
                <td> <%= link_to 'Delete', [job.member, job],
                 method: :delete,
                 data: { confirm: 'Are you sure?' } %></td>
              </tr>
            <% end %>
          </table>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>